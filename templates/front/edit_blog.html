{% extends "base.html" %}
{% load staticfiles %}

{% block title %}Blog - healthchecks.io{% endblock %}

{% block content %}

<div class="col-sm-12">

    {% if request.user.is_authenticated and request.user == blog.user %}
    
        <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-10">
                <h2>Edit my blogpost</h2> <br> 
                {% if messages %}
                <div>
                    {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                        {{ message }}
                      </div>
                    {% endfor %}
                </div>
                {% endif %}
                <br>
                <form id="edit-blogpost-form" class="form-horizontal" method="post" action="{% url 'hc-edit-blogpost' blog.id %}">
                    {% csrf_token %}

                    <div class="col-sm-12">
                        <div class="col-sm-2">
                            <label for="add-blog-title" class="col-sm-2 control-label" style="text-align: left">
                                Title: 
                            </label>
                        </div>
                        <div class="col-sm-10">
                                <input type="text" name="title" class="form-control" value = "{{ blog.title }}" required>
                        </div>
                    </div> <br> <br> <br>

                    <div class="col-sm-12">
                        <div class="col-sm-2">
                            <label for="add-blog-category" class="col-sm-2 control-label" style="text-align: left">
                                Category: 
                            </label>
                        </div>
                        <div class="col-sm-10">
                            <select name="category" id="" class="form-control" value = "{{ blog.category }}" required>
                                <option selected>{{blog.category}}</option>

                                {% for category in categories %}
                                <option>{{category.category}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div> <br> <br> <br>
                    
                    

                    <div class="col-sm-12">
                        <div class="col-sm-12">
                            <label for="add-blog-content" class="col-sm-2 control-label" style="text-align: left">
                                Content: 
                            </label> <br> <br>
                            
                            <textarea name="content" id="content" rows="10" class="form-control" required> {{ blog.content }} </textarea>
                            <button type="submit" class="btn btn-primary" style="margin-top:30px; float: right">Save</button>
                          
                        </div>
                    </div>
                </form>
            </div>

            <div class="col-md-1"></div>
        </div>

    {% else %}
    <a href="/accounts/login/">
    <button class="btn btn-primary btn-sm" style="float:right">Login to create a blogpost</button></a>
    {% endif %}

</div>

{% endblock %}

{% block scripts %}
    <script src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.js"></script>
    <script>
            $(document).ready(function() {
                $('#content').summernote(
                    {
                    toolbar: [
                        // [groupName, [list of button]]
                        ['style', ['bold', 'italic', 'underline', 'clear']],
                        ['font', ['strikethrough', 'superscript', 'subscript']],
                        ['fontsize', ['fontsize']],
                        ['color', ['color']],
                        ['para', ['ul', 'ol', 'paragraph']],
                        ['height', ['height']]
                    ]
                    }
                );
            });
          </script>
{% endblock %}